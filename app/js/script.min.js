/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./app/js/badges.js":
/*!**************************!*\
  !*** ./app/js/badges.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _progressBar_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./progressBar.js */ \"./app/js/progressBar.js\");\n/* harmony import */ var _result_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./result.js */ \"./app/js/result.js\");\n\r\n\r\n\r\nconst priceNumberInput = document.getElementById('calculator__form-price');\r\n\r\nconst contributionBadges = document.querySelectorAll('.contribution');\r\nconst contributionNumberInput = document.getElementById('calculator__form-contribution');\r\nconst contributionRangeInput = document.getElementById('calculator__form-range-2');\r\nconst contributionProgressBar = document.getElementById('progress-bar-2')\r\n\r\nconst termBadges = document.querySelectorAll('.term');\r\nconst termNumberInput = document.getElementById('calculator__form-term');\r\nconst termRangeInput = document.getElementById('calculator__form-range-3');\r\nconst termProgressBar = document.getElementById('progress-bar-3');\r\n\r\nconst rateBadges = document.querySelectorAll('.rate');\r\nconst rateNumberInput = document.getElementById('calculator__form-rate');\r\nconst rateRangeInput = document.getElementById('calculator__form-range-4');\r\nconst rateProgressBar = document.getElementById('progress-bar-4');\r\n\r\nfunction onBadgeClick(numberInputElement, rangeInputElement, progressBarElement, badgeValue) {\r\n\tnumberInputElement.value = badgeValue;\r\n\trangeInputElement.value = badgeValue;\r\n\t(0,_progressBar_js__WEBPACK_IMPORTED_MODULE_0__.updateProgressBar)(rangeInputElement, progressBarElement, badgeValue);\r\n}\r\n\r\ncontributionBadges.forEach((badge) => {\r\n\tbadge.addEventListener('click', () => {\r\n\t\tconst value = priceNumberInput.value.replace(/\\s/g, '') / 100 * Number(badge.dataset.value);\r\n\t\tonBadgeClick(contributionNumberInput, contributionRangeInput, contributionProgressBar, value);\r\n\t\t(0,_result_js__WEBPACK_IMPORTED_MODULE_1__.updateValues)();\r\n\t})\r\n});\r\n\r\ntermBadges.forEach((badge) => {\r\n\tbadge.addEventListener('click', () => {\r\n\t\tdebugger;\r\n\t\tonBadgeClick(termNumberInput, termRangeInput, termProgressBar, Number(badge.dataset.value));\r\n\t\t(0,_result_js__WEBPACK_IMPORTED_MODULE_1__.updateValues)();\r\n\t})\r\n});\r\n\r\nrateBadges.forEach((badge) => {\r\n\tbadge.addEventListener('click', () => {\r\n\t\tdebugger;\r\n\t\tonBadgeClick(rateNumberInput, rateRangeInput, rateProgressBar, Number(badge.dataset.value));\r\n\t\t(0,_result_js__WEBPACK_IMPORTED_MODULE_1__.updateValues)();\r\n\t})\r\n});\r\n\n\n//# sourceURL=webpack://kitchen-furniture/./app/js/badges.js?");

/***/ }),

/***/ "./app/js/inputSpaces.js":
/*!*******************************!*\
  !*** ./app/js/inputSpaces.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   inputSpaces: () => (/* binding */ inputSpaces)\n/* harmony export */ });\nfunction inputSpaces () {\n    function formatNumberWithSpaces(number) {\n        const str = number.toString();\n        const s = str.length;\n        const chars = str.split('');\n        const strWithSpaces = chars.reduceRight((acc, char, i) => {\n            const spaceOrNothing = ((((s - i) % 3) === 0) ? ' ' : '');\n            return (spaceOrNothing + char + acc);\n        }, '');\n    \n        return ((strWithSpaces[0] === ' ') ? strWithSpaces.slice(1) : strWithSpaces);\n    }\n    \nconst priceInput = document.getElementById('calculator__form-price');\nconst contributionInput = document.getElementById('calculator__form-contribution');\n\nfunction formatInput(input) {\n    const value = input.value.replace(/\\s/g, ''); \n    const formattedValue = formatNumberWithSpaces(value);\n    console.log(formattedValue);\n    input.type = 'text';\n    input.value = formattedValue;\n    console.log(input.value);\n}\n\nformatInput(priceInput);\nformatInput(contributionInput);\n}\ndocument.addEventListener('DOMContentLoaded',inputSpaces ());\n\n//# sourceURL=webpack://kitchen-furniture/./app/js/inputSpaces.js?");

/***/ }),

/***/ "./app/js/main.js":
/*!************************!*\
  !*** ./app/js/main.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _result_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./result.js */ \"./app/js/result.js\");\n/* harmony import */ var _inputSpaces_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./inputSpaces.js */ \"./app/js/inputSpaces.js\");\n/* harmony import */ var _progressBar_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./progressBar.js */ \"./app/js/progressBar.js\");\n/* harmony import */ var _badges_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./badges.js */ \"./app/js/badges.js\");\n/* harmony import */ var _table_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./table.js */ \"./app/js/table.js\");\n\n\n\n\n\n\n//# sourceURL=webpack://kitchen-furniture/./app/js/main.js?");

/***/ }),

/***/ "./app/js/progressBar.js":
/*!*******************************!*\
  !*** ./app/js/progressBar.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateProgressBar: () => (/* binding */ updateProgressBar)\n/* harmony export */ });\n/* harmony import */ var _result_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./result.js */ \"./app/js/result.js\");\n/* harmony import */ var _inputSpaces_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./inputSpaces.js */ \"./app/js/inputSpaces.js\");\n\n\n\nfunction updateProgressBar(rangeInputElement, progressBarElement, value) {\n\tconst max = rangeInputElement.max;\n\tconst percentage = (value / max) * 98;\n\tprogressBarElement.style.width = percentage + '%';\n}\n\nconst rangeInputs = Array.from(document.querySelectorAll('.calculator__form-slider'));\nconst numberInputs = Array.from(document.querySelectorAll('.calculator__form-input'));\nconst progressBars = Array.from(document.querySelectorAll('.calculator__form-progress-bar'))\n\nconst formNumberFields = rangeInputs.map((element, index) => [element, numberInputs[index], progressBars[index]]);\n\nformNumberFields.forEach(([ rangeInput, numberInput, progressBar ]) => {\n\tconst rangeInputElement = document.getElementById(rangeInput.id);\n\tconst numberInputElement = document.getElementById(numberInput.id);\n\tconst progressBarElement = document.getElementById(progressBar.id);\n\n\trangeInputElement.addEventListener('input', ({ target }) => {\n\t\tupdateProgressBar(rangeInputElement, progressBarElement, target.value);\n\t\tnumberInputElement.value = target.value;\n        (0,_result_js__WEBPACK_IMPORTED_MODULE_0__.updateValues)();\n\t\t(0,_inputSpaces_js__WEBPACK_IMPORTED_MODULE_1__.inputSpaces)();\n\t})\n\n\tnumberInputElement.addEventListener('input', ({ target }) => {\n\t\tlet targetValue = Number(target.value);\n\n\t\tif (target.value === \"\") {\n\t\t\ttarget.value= 0;\n\t\t}\n\t\tif (targetValue > rangeInputElement.max) {\n\t\t\ttargetValue = Number(target.value.slice(0, -1));\n\t\t\tnumberInputElement.value = targetValue;\n\t\t}\n\t\t\trangeInputElement.value = targetValue;\n\t\t\tupdateProgressBar(rangeInputElement, progressBarElement, targetValue);\n\t\t\t(0,_result_js__WEBPACK_IMPORTED_MODULE_0__.updateValues)();\n\t\t\t(0,_inputSpaces_js__WEBPACK_IMPORTED_MODULE_1__.inputSpaces)();\n\t})\n})\n\n\n//# sourceURL=webpack://kitchen-furniture/./app/js/progressBar.js?");

/***/ }),

/***/ "./app/js/result.js":
/*!**************************!*\
  !*** ./app/js/result.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateValues: () => (/* binding */ updateValues)\n/* harmony export */ });\n/* harmony import */ var _spaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./spaces.js */ \"./app/js/spaces.js\");\n\nfunction updateValues() {\n    let propertyPrice = parseFloat(document.getElementById('calculator__form-price').value.replace(/\\s/g, ''));\n    let initialContribution = parseFloat(document.getElementById('calculator__form-contribution').value.replace(/\\s/g, ''));\n    let loanTerm = parseInt(document.getElementById('calculator__form-term').value);\n    let interestRate = parseFloat(document.getElementById('calculator__form-rate').value);\n\n    let loanAmount = Math.round(propertyPrice - initialContribution);\n    let monthlyInterestRate = interestRate / 100 / 12;\n    let numberOfPayments = loanTerm * 12;\n    let monthlyPayment = Math.round((loanAmount * monthlyInterestRate) / (1 - Math.pow(1 + monthlyInterestRate, -numberOfPayments)));\n    let interestAmount = Math.round(monthlyPayment * numberOfPayments - loanAmount);\n    let totalAmount = Math.round(loanAmount + interestAmount);\n    let requiredIncome = Math.round(monthlyPayment * 1.66);\n\n      loanAmount = Math.max(0, loanAmount);\n      interestAmount = Math.max(0, interestAmount);\n      totalAmount = Math.max(0, totalAmount);\n      requiredIncome = Math.max(0, requiredIncome);\n    if (propertyPrice<=0 || loanTerm<=0 || propertyPrice<=initialContribution || interestRate===0) {\n        document.querySelector('.calculator__result-month').textContent = 0;\n        document.querySelector('.calculator__result-credit .calculator__result-weight').textContent = 0;\n        document.querySelector('.calculator__result-credit:nth-child(2) .calculator__result-weight').textContent = 0;\n        document.querySelector('.calculator__result-credit:nth-child(3) .calculator__result-weight').textContent = 0;\n        document.querySelector('.calculator__result-credit:nth-child(4) .calculator__result-weight').textContent = 0;\n    }\n    else {\n        document.querySelector('.calculator__result-month').textContent = monthlyPayment;\n        document.querySelector('.calculator__result-credit .calculator__result-weight').textContent = loanAmount;\n        document.querySelector('.calculator__result-credit:nth-child(2) .calculator__result-weight').textContent = interestAmount;\n        document.querySelector('.calculator__result-credit:nth-child(3) .calculator__result-weight').textContent = totalAmount;\n        document.querySelector('.calculator__result-credit:nth-child(4) .calculator__result-weight').textContent = requiredIncome;\n    }\n    const resultWeightSpans = document.querySelectorAll('.calculator__result-weight');\n    const resultMonthSpan = document.querySelector('.calculator__result-month'); \n    \n    const originalMonthNumber = parseFloat(resultMonthSpan.textContent);\n    resultMonthSpan.textContent = (0,_spaces_js__WEBPACK_IMPORTED_MODULE_0__.formatNumberWithSpaces)(originalMonthNumber) + ' ₽';\n    \n    resultWeightSpans.forEach((span) => {\n        const originalNumber = parseFloat(span.textContent);\n        span.textContent = (0,_spaces_js__WEBPACK_IMPORTED_MODULE_0__.formatNumberWithSpaces)(originalNumber) + ' ₽';\n    });\n}\ndocument.addEventListener('DOMContentLoaded',updateValues());\n\n\n//# sourceURL=webpack://kitchen-furniture/./app/js/result.js?");

/***/ }),

/***/ "./app/js/spaces.js":
/*!**************************!*\
  !*** ./app/js/spaces.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatNumberWithSpaces: () => (/* binding */ formatNumberWithSpaces)\n/* harmony export */ });\nfunction formatNumberWithSpaces(number) {\n    const str = number.toString();\n    const s = str.length;\n    const chars = str.split('');\n    const strWithSpaces = chars.reduceRight((acc, char, i) => {\n        const spaceOrNothing = ((((s - i) % 3) === 0) ? ' ' : '');\n        return (spaceOrNothing + char + acc);\n    }, '');\n\n    return ((strWithSpaces[0] === ' ') ? strWithSpaces.slice(1) : strWithSpaces);\n}\n\n\n\n//# sourceURL=webpack://kitchen-furniture/./app/js/spaces.js?");

/***/ }),

/***/ "./app/js/table.js":
/*!*************************!*\
  !*** ./app/js/table.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _spaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./spaces.js */ \"./app/js/spaces.js\");\n\n\nconst resultButton = document.querySelector('.calculator__result-button');\n\nfunction getFirstDayOfNextMonth(currentDate) {\n    // Создаем копию текущей даты\n    const firstDayOfNextMonth = new Date(currentDate);\n\n    // Устанавливаем следующий месяц\n    firstDayOfNextMonth.setMonth(firstDayOfNextMonth.getMonth() + 1);\n\n    // Устанавливаем день месяца в текущее число\n    firstDayOfNextMonth.setDate(currentDate.getDate());\n\n    return firstDayOfNextMonth;\n}\n\nfunction tableResult() {\n         const tableBody = document.getElementById('table__payment');\n         const tableFoot = document.getElementById('table__foot');\n        // Получаем значения из формы\n        let propertyPrice = parseFloat(document.getElementById('calculator__form-price').value.replace(/\\s/g, ''));\n        let initialContribution = parseFloat(document.getElementById('calculator__form-contribution').value.replace(/\\s/g, ''));\n        let loanTerm = parseInt(document.getElementById('calculator__form-term').value);\n        let interestRate = parseFloat(document.getElementById('calculator__form-rate').value);\n\n        // Ваш код для подсчёта ежемесячного платежа\n        const monthlyInterestRate = interestRate / 100 / 12;\n        const numberOfPayments = loanTerm * 12;\n        const loanAmount = propertyPrice - initialContribution;\n        const monthlyPayment =\n            (loanAmount * monthlyInterestRate) /\n            (1 - Math.pow(1 + monthlyInterestRate, -numberOfPayments));\n\n        // Очищаем таблицу перед обновлением\n        tableBody.innerHTML = '';\n\n        // Заполняем таблицу данными\n        let remainingLoanAmount = loanAmount;\n        let currentDate = new Date(); \n        \n        for (let paymentNumber = 1; paymentNumber <= numberOfPayments; paymentNumber++) {\n            const interestPayment = remainingLoanAmount * monthlyInterestRate;\n            const principalPayment = monthlyPayment - interestPayment;\n            remainingLoanAmount -= principalPayment;\n\n            const firstDayOfNextMonth = getFirstDayOfNextMonth(currentDate);\n\n            const row = document.createElement('tr');\n            row.innerHTML = `\n                <td>${paymentNumber}</td>\n                <td>${firstDayOfNextMonth.toLocaleDateString()}</td>\n                <td>${(0,_spaces_js__WEBPACK_IMPORTED_MODULE_0__.formatNumberWithSpaces)(remainingLoanAmount.toFixed(2))}</td>\n                <td>${(0,_spaces_js__WEBPACK_IMPORTED_MODULE_0__.formatNumberWithSpaces)(principalPayment.toFixed(2))}</td>\n                <td>${(0,_spaces_js__WEBPACK_IMPORTED_MODULE_0__.formatNumberWithSpaces)(interestPayment.toFixed(2))}</td>\n                <td>${(0,_spaces_js__WEBPACK_IMPORTED_MODULE_0__.formatNumberWithSpaces)(monthlyPayment.toFixed(2))}</td>\n            `;\n\n            tableBody.appendChild(row);\n            currentDate = firstDayOfNextMonth;\n        }\n\n        // Обновляем общую сумму в подвале таблицы\n        const totalPrincipal = loanAmount - remainingLoanAmount;\n        const totalInterest = monthlyPayment * numberOfPayments - loanAmount;\n        tableFoot.innerHTML = `\n            <tr>\n                <th colspan=\"3\">Всего</th>\n                <th>${totalPrincipal.toFixed(2)}</th>\n                <th>${totalInterest.toFixed(2)}</th>\n                <th>${(totalPrincipal + totalInterest).toFixed(2)}</th>\n            </tr>\n        `;\n};\n\nresultButton.addEventListener('click',tableResult)\n\n//# sourceURL=webpack://kitchen-furniture/./app/js/table.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./app/js/main.js");
/******/ 	
/******/ })()
;