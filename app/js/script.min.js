/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./app/js/badges.js":
/*!**************************!*\
  !*** ./app/js/badges.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _progressBar_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./progressBar.js */ \"./app/js/progressBar.js\");\n/* harmony import */ var _result_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./result.js */ \"./app/js/result.js\");\n\r\n\r\n\r\nconst priceNumberInput = document.getElementById('calculator__form-price');\r\n\r\nconst contributionBadges = document.querySelectorAll('.contribution');\r\nconst contributionNumberInput = document.getElementById('calculator__form-contribution');\r\nconst contributionRangeInput = document.getElementById('calculator__form-range-2');\r\nconst contributionProgressBar = document.getElementById('progress-bar-2')\r\n\r\nconst termBadges = document.querySelectorAll('.term');\r\nconst termNumberInput = document.getElementById('calculator__form-term');\r\nconst termRangeInput = document.getElementById('calculator__form-range-3');\r\nconst termProgressBar = document.getElementById('progress-bar-3');\r\n\r\nconst rateBadges = document.querySelectorAll('.rate');\r\nconst rateNumberInput = document.getElementById('calculator__form-rate');\r\nconst rateRangeInput = document.getElementById('calculator__form-range-4');\r\nconst rateProgressBar = document.getElementById('progress-bar-4');\r\n\r\nfunction onBadgeClick(numberInputElement, rangeInputElement, progressBarElement, badgeValue) {\r\n\tnumberInputElement.value = badgeValue;\r\n\trangeInputElement.value = badgeValue;\r\n\t(0,_progressBar_js__WEBPACK_IMPORTED_MODULE_0__.updateProgressBar)(rangeInputElement, progressBarElement, badgeValue);\r\n}\r\n\r\ncontributionBadges.forEach((badge) => {\r\n\tbadge.addEventListener('click', () => {\r\n\t\tconst value = priceNumberInput.value / 100 * Number(badge.dataset.value);\r\n\t\tonBadgeClick(contributionNumberInput, contributionRangeInput, contributionProgressBar, value);\r\n\t\t(0,_result_js__WEBPACK_IMPORTED_MODULE_1__.updateValues)();\r\n\t})\r\n});\r\n\r\ntermBadges.forEach((badge) => {\r\n\tbadge.addEventListener('click', () => {\r\n\t\tdebugger;\r\n\t\tonBadgeClick(termNumberInput, termRangeInput, termProgressBar, Number(badge.dataset.value));\r\n\t\t(0,_result_js__WEBPACK_IMPORTED_MODULE_1__.updateValues)();\r\n\t})\r\n});\r\n\r\nrateBadges.forEach((badge) => {\r\n\tbadge.addEventListener('click', () => {\r\n\t\tdebugger;\r\n\t\tonBadgeClick(rateNumberInput, rateRangeInput, rateProgressBar, Number(badge.dataset.value));\r\n\t\t(0,_result_js__WEBPACK_IMPORTED_MODULE_1__.updateValues)();\r\n\t})\r\n});\r\n\n\n//# sourceURL=webpack://kitchen-furniture/./app/js/badges.js?");

/***/ }),

/***/ "./app/js/inputSpaces.js":
/*!*******************************!*\
  !*** ./app/js/inputSpaces.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   inputSpaces: () => (/* binding */ inputSpaces)\n/* harmony export */ });\nfunction inputSpaces () {\r\n    function formatNumberWithSpaces(number) {\r\n        const str = number.toString();\r\n        const s = str.length;\r\n        const chars = str.split('');\r\n        const strWithSpaces = chars.reduceRight((acc, char, i) => {\r\n            const spaceOrNothing = ((((s - i) % 3) === 0) ? ' ' : '');\r\n            return (spaceOrNothing + char + acc);\r\n        }, '');\r\n    \r\n        return ((strWithSpaces[0] === ' ') ? strWithSpaces.slice(1) : strWithSpaces);\r\n    }\r\n    \r\nconst priceInput = document.getElementById('calculator__form-price');\r\nconst contributionInput = document.getElementById('calculator__form-contribution');\r\n\r\nfunction formatInput(input) {\r\n    const value = input.value.replace(/\\s/g, ''); \r\n    const formattedValue = formatNumberWithSpaces(value);\r\n    console.log(formattedValue);\r\n    input.type = 'text';\r\n    input.value = formattedValue;\r\n    console.log(input.value);\r\n}\r\n\r\nformatInput(priceInput);\r\nformatInput(contributionInput);\r\n}\r\ndocument.addEventListener('DOMContentLoaded',inputSpaces ());\n\n//# sourceURL=webpack://kitchen-furniture/./app/js/inputSpaces.js?");

/***/ }),

/***/ "./app/js/main.js":
/*!************************!*\
  !*** ./app/js/main.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _result_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./result.js */ \"./app/js/result.js\");\n/* harmony import */ var _inputSpaces_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./inputSpaces.js */ \"./app/js/inputSpaces.js\");\n/* harmony import */ var _progressBar_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./progressBar.js */ \"./app/js/progressBar.js\");\n/* harmony import */ var _badges_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./badges.js */ \"./app/js/badges.js\");\n/* harmony import */ var _table_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./table.js */ \"./app/js/table.js\");\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://kitchen-furniture/./app/js/main.js?");

/***/ }),

/***/ "./app/js/progressBar.js":
/*!*******************************!*\
  !*** ./app/js/progressBar.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateProgressBar: () => (/* binding */ updateProgressBar)\n/* harmony export */ });\n/* harmony import */ var _result_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./result.js */ \"./app/js/result.js\");\n/* harmony import */ var _inputSpaces_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./inputSpaces.js */ \"./app/js/inputSpaces.js\");\n\r\n\r\n\r\nfunction updateProgressBar(rangeInputElement, progressBarElement, value) {\r\n\tconst max = rangeInputElement.max;\r\n\tconst percentage = (value / max) * 98;\r\n\tprogressBarElement.style.width = percentage + '%';\r\n}\r\n\r\nconst rangeInputs = Array.from(document.querySelectorAll('.calculator__form-slider'));\r\nconst numberInputs = Array.from(document.querySelectorAll('.calculator__form-input'));\r\nconst progressBars = Array.from(document.querySelectorAll('.calculator__form-progress-bar'))\r\n\r\nconst formNumberFields = rangeInputs.map((element, index) => [element, numberInputs[index], progressBars[index]]);\r\n\r\nformNumberFields.forEach(([ rangeInput, numberInput, progressBar ]) => {\r\n\tconst rangeInputElement = document.getElementById(rangeInput.id);\r\n\tconst numberInputElement = document.getElementById(numberInput.id);\r\n\tconst progressBarElement = document.getElementById(progressBar.id);\r\n\r\n\trangeInputElement.addEventListener('input', ({ target }) => {\r\n\t\tupdateProgressBar(rangeInputElement, progressBarElement, target.value);\r\n\t\tnumberInputElement.value = target.value;\r\n        (0,_result_js__WEBPACK_IMPORTED_MODULE_0__.updateValues)();\r\n\t\t(0,_inputSpaces_js__WEBPACK_IMPORTED_MODULE_1__.inputSpaces)();\r\n\t})\r\n\r\n\tnumberInputElement.addEventListener('input', ({ target }) => {\r\n\t\tlet targetValue = Number(target.value);\r\n\r\n\t\tif (target.value === \"\") {\r\n\t\t\ttarget.value= 0;\r\n\t\t}\r\n\t\tif (targetValue > rangeInputElement.max) {\r\n\t\t\ttargetValue = Number(target.value.slice(0, -1));\r\n\t\t\tnumberInputElement.value = targetValue;\r\n\t\t}\r\n\t\t\trangeInputElement.value = targetValue;\r\n\t\t\tupdateProgressBar(rangeInputElement, progressBarElement, targetValue);\r\n\t\t\t(0,_result_js__WEBPACK_IMPORTED_MODULE_0__.updateValues)();\r\n\t\t\t(0,_inputSpaces_js__WEBPACK_IMPORTED_MODULE_1__.inputSpaces)();\r\n\t})\r\n})\r\n\n\n//# sourceURL=webpack://kitchen-furniture/./app/js/progressBar.js?");

/***/ }),

/***/ "./app/js/result.js":
/*!**************************!*\
  !*** ./app/js/result.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateValues: () => (/* binding */ updateValues)\n/* harmony export */ });\n/* harmony import */ var _spaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./spaces.js */ \"./app/js/spaces.js\");\n\r\nfunction updateValues() {\r\n    let propertyPrice = parseFloat(document.getElementById('calculator__form-price').value);\r\n    let initialContribution = parseFloat(document.getElementById('calculator__form-contribution').value);\r\n    let loanTerm = parseInt(document.getElementById('calculator__form-term').value);\r\n    let interestRate = parseFloat(document.getElementById('calculator__form-rate').value);\r\n\r\n    let loanAmount = Math.round(propertyPrice - initialContribution);\r\n    let monthlyInterestRate = interestRate / 100 / 12;\r\n    let numberOfPayments = loanTerm * 12;\r\n    let monthlyPayment = Math.round((loanAmount * monthlyInterestRate) / (1 - Math.pow(1 + monthlyInterestRate, -numberOfPayments)));\r\n    let interestAmount = Math.round(monthlyPayment * numberOfPayments - loanAmount);\r\n    let totalAmount = Math.round(loanAmount + interestAmount);\r\n    let requiredIncome = Math.round(monthlyPayment * 1.66);\r\n\r\n      loanAmount = Math.max(0, loanAmount);\r\n      interestAmount = Math.max(0, interestAmount);\r\n      totalAmount = Math.max(0, totalAmount);\r\n      requiredIncome = Math.max(0, requiredIncome);\r\n    if (propertyPrice<=0 || loanTerm<=0 || propertyPrice<=initialContribution || interestRate===0) {\r\n        document.querySelector('.calculator__result-month').textContent = 0;\r\n        document.querySelector('.calculator__result-credit .calculator__result-weight').textContent = 0;\r\n        document.querySelector('.calculator__result-credit:nth-child(2) .calculator__result-weight').textContent = 0;\r\n        document.querySelector('.calculator__result-credit:nth-child(3) .calculator__result-weight').textContent = 0;\r\n        document.querySelector('.calculator__result-credit:nth-child(4) .calculator__result-weight').textContent = 0;\r\n    }\r\n    else {\r\n        document.querySelector('.calculator__result-month').textContent = monthlyPayment;\r\n        document.querySelector('.calculator__result-credit .calculator__result-weight').textContent = loanAmount;\r\n        document.querySelector('.calculator__result-credit:nth-child(2) .calculator__result-weight').textContent = interestAmount;\r\n        document.querySelector('.calculator__result-credit:nth-child(3) .calculator__result-weight').textContent = totalAmount;\r\n        document.querySelector('.calculator__result-credit:nth-child(4) .calculator__result-weight').textContent = requiredIncome;\r\n    }\r\n    const resultWeightSpans = document.querySelectorAll('.calculator__result-weight');\r\n    const resultMonthSpan = document.querySelector('.calculator__result-month'); \r\n    \r\n    const originalMonthNumber = parseFloat(resultMonthSpan.textContent);\r\n    resultMonthSpan.textContent = (0,_spaces_js__WEBPACK_IMPORTED_MODULE_0__.formatNumberWithSpaces)(originalMonthNumber) + ' ₽';\r\n    \r\n    resultWeightSpans.forEach((span) => {\r\n        const originalNumber = parseFloat(span.textContent);\r\n        span.textContent = (0,_spaces_js__WEBPACK_IMPORTED_MODULE_0__.formatNumberWithSpaces)(originalNumber) + ' ₽';\r\n    });\r\n}\r\ndocument.addEventListener('DOMContentLoaded',updateValues());\r\n\n\n//# sourceURL=webpack://kitchen-furniture/./app/js/result.js?");

/***/ }),

/***/ "./app/js/spaces.js":
/*!**************************!*\
  !*** ./app/js/spaces.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatNumberWithSpaces: () => (/* binding */ formatNumberWithSpaces)\n/* harmony export */ });\nfunction formatNumberWithSpaces(number) {\r\n    const str = number.toString();\r\n    const s = str.length;\r\n    const chars = str.split('');\r\n    const strWithSpaces = chars.reduceRight((acc, char, i) => {\r\n        const spaceOrNothing = ((((s - i) % 3) === 0) ? ' ' : '');\r\n        return (spaceOrNothing + char + acc);\r\n    }, '');\r\n\r\n    return ((strWithSpaces[0] === ' ') ? strWithSpaces.slice(1) : strWithSpaces);\r\n}\r\n\r\n\n\n//# sourceURL=webpack://kitchen-furniture/./app/js/spaces.js?");

/***/ }),

/***/ "./app/js/table.js":
/*!*************************!*\
  !*** ./app/js/table.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _spaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./spaces.js */ \"./app/js/spaces.js\");\n\r\n\r\nconst resultButton = document.querySelector('.calculator__result-button');\r\n\r\nfunction getFirstDayOfNextMonth(currentDate) {\r\n    // Создаем копию текущей даты\r\n    const firstDayOfNextMonth = new Date(currentDate);\r\n\r\n    // Устанавливаем следующий месяц\r\n    firstDayOfNextMonth.setMonth(firstDayOfNextMonth.getMonth() + 1);\r\n\r\n    // Устанавливаем день месяца в текущее число\r\n    firstDayOfNextMonth.setDate(currentDate.getDate());\r\n\r\n    return firstDayOfNextMonth;\r\n}\r\n\r\nfunction tableResult() {\r\n         const tableBody = document.getElementById('table__payment');\r\n         const tableFoot = document.getElementById('table__foot');\r\n        // Получаем значения из формы\r\n        let propertyPrice = parseFloat(document.getElementById('calculator__form-price').value.replace(/\\s/g, ''));\r\n        let initialContribution = parseFloat(document.getElementById('calculator__form-contribution').value.replace(/\\s/g, ''));\r\n        let loanTerm = parseInt(document.getElementById('calculator__form-term').value);\r\n        let interestRate = parseFloat(document.getElementById('calculator__form-rate').value);\r\n\r\n        // Ваш код для подсчёта ежемесячного платежа\r\n        const monthlyInterestRate = interestRate / 100 / 12;\r\n        const numberOfPayments = loanTerm * 12;\r\n        const loanAmount = propertyPrice - initialContribution;\r\n        const monthlyPayment =\r\n            (loanAmount * monthlyInterestRate) /\r\n            (1 - Math.pow(1 + monthlyInterestRate, -numberOfPayments));\r\n\r\n        // Очищаем таблицу перед обновлением\r\n        tableBody.innerHTML = '';\r\n\r\n        // Заполняем таблицу данными\r\n        let remainingLoanAmount = loanAmount;\r\n        let currentDate = new Date(); \r\n        \r\n        for (let paymentNumber = 1; paymentNumber <= numberOfPayments; paymentNumber++) {\r\n            const interestPayment = remainingLoanAmount * monthlyInterestRate;\r\n            const principalPayment = monthlyPayment - interestPayment;\r\n            remainingLoanAmount -= principalPayment;\r\n\r\n            const firstDayOfNextMonth = getFirstDayOfNextMonth(currentDate);\r\n\r\n            const row = document.createElement('tr');\r\n            row.innerHTML = `\r\n                <td>${paymentNumber}</td>\r\n                <td>${firstDayOfNextMonth.toLocaleDateString()}</td>\r\n                <td>${(0,_spaces_js__WEBPACK_IMPORTED_MODULE_0__.formatNumberWithSpaces)(remainingLoanAmount.toFixed(2))}</td>\r\n                <td>${(0,_spaces_js__WEBPACK_IMPORTED_MODULE_0__.formatNumberWithSpaces)(principalPayment.toFixed(2))}</td>\r\n                <td>${(0,_spaces_js__WEBPACK_IMPORTED_MODULE_0__.formatNumberWithSpaces)(interestPayment.toFixed(2))}</td>\r\n                <td>${(0,_spaces_js__WEBPACK_IMPORTED_MODULE_0__.formatNumberWithSpaces)(monthlyPayment.toFixed(2))}</td>\r\n            `;\r\n\r\n            tableBody.appendChild(row);\r\n            currentDate = firstDayOfNextMonth;\r\n        }\r\n\r\n        // Обновляем общую сумму в подвале таблицы\r\n        const totalPrincipal = loanAmount - remainingLoanAmount;\r\n        const totalInterest = monthlyPayment * numberOfPayments - loanAmount;\r\n        tableFoot.innerHTML = `\r\n            <tr>\r\n                <th colspan=\"3\">Всего</th>\r\n                <th>${totalPrincipal.toFixed(2)}</th>\r\n                <th>${totalInterest.toFixed(2)}</th>\r\n                <th>${(totalPrincipal + totalInterest).toFixed(2)}</th>\r\n            </tr>\r\n        `;\r\n};\r\n\r\nresultButton.addEventListener('click',tableResult)\n\n//# sourceURL=webpack://kitchen-furniture/./app/js/table.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./app/js/main.js");
/******/ 	
/******/ })()
;